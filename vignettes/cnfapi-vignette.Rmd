---
title: "nutrientr Vignette"
author: "Sara Hall, Justine Filion, Saisree Gownipalli Ramanaiah"
date: "February 10,2022"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{cnfapi-vignette}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
#library(nutrientr)
```

## API Access Key

An API key is required to run the functions in `nutrientr` and query the Canadian Nutrient File (CNF) Database. The key can be acquired at https://hc-sc.api.canada.ca/en/detail?api=cnf. The API key can be set in the environment using `Sys.setenv(CN_API = 'your_API_key_here')`. Alternatively, instead of setting the API key in the environment, the key can be passed into the `nutrientr` functions as an argument.

## `nutrientr` Functions

The `nutrientr` package focuses on querying data from the Canadian Nutrient File (CNF) Database and functions fall into the following categories:

- Food information
- Nutrient information
- Refuse Amount
- Serving Size
- Yield Amount

### Food Information

The `get_food()` function retrieves food information from the CNF based on user search terms. An overview of the search terms and function arguments includes:

- **foodCode**: List of foodCode of foods available. The values depend on each endpoint. 
- **lang**:  Define which language you would like the response to be in query string
- **apiKey**: If an API key is not set in the environment, an access key can be passed directly into a function.


An example of using `get_food()` to search for the food with food_code as 5 would be as follows:

```{r}
get_food(foodCode = 5)
```
### Nutrient Amount information

The `get_nutrientamount()`, `get_nutrientgroup()` , `get_nutrientname()` , `get_nutrientsource()` functions retrieve nutrient amount information from the CNF based on user search terms. An overview of the search terms and function arguments includes:

- **foodCode**: List of foodCode of foods available. The values depend on each endpoint. 
- **nutrientGroupId**:  List of nutrient group ids available.
- **nutrientNameId**: List of all nutrient names for all the foods
- **nutrientSourceId**: List of all nutrient sources listed by their source id
- **lang**:  Define which language you would like the response to be in query string
- **apiKey**: If an API key is not set in the environment, an access key can be passed directly into a function.

If a user wanted to search and return the all nutrient amount information, `get_nutrientamount()` could be used:

```{r}
get_nutrientamount()
```
or if a user wanted to search and return the nutrient group information of nutrient_group_id of 7, `get_nutrientgroup()` could be used:
```{r}
get_nutrientgroup(nutrientGroupId = 7)
```
or if a user wanted to search and return the nutrient name information of nutrient_name_id of 550, `get_nutrientname()` could be used:
```{r}
get_nutrientname()
```
or if a user wanted to search and return the all nutrient source information , `get_nutrientsource()` could be used:
```{r}
get_nutrientsource()
```
### Refuse Amount

The `get_refuseamount()` function retrieves refuse amount information from the CNF based on user search terms. An overview of the search terms and function arguments includes:

- **foodCode**: List of foodCode of foods available. The values depend on each endpoint.  
- **lang**:  Define which language you would like the response to be in query string
- **apiKey**: If an API key is not set in the environment, an access key can be passed directly into a function.

If a user wanted to search and return the all refuse amount information , `get_refuseamount()` could be used:
```{r}
get_refuseamount()
```
### Serving Size

The `get_servingsize()` functions all retrieve serving sizes information from the CNF based on user search terms. An overview of the search terms and function arguments includes:

- **foodCode**: List of foodCode of foods available. The values depend on each endpoint.  
- **lang**:  Define which language you would like the response to be in query string
- **apiKey**: If an API key is not set in the environment, an access key can be passed directly into a function.

If a user wanted to search and return the all serving size information , `get_servingsize()` could be used:
```{r}
get_servingsize()
```
### Yield Amount
The `get_yieldamount()`function retrieves yield information from the CNF based on user search terms. An overview of the search terms and function arguments includes:

- **foodCode**: List of foodCode of foods available. The values depend on each endpoint.  
- **lang**:  Define which language you would like the response to be in query string
- **apiKey**: If an API key is not set in the environment, an access key can be passed directly into a function.

If a user wanted to search and return the all yield amount information , `get_yieldamount()` could be used:
```{r}
get_yieldamount()
```

